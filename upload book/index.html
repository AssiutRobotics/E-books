<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Book</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../register/style.css">

    <link rel="stylesheet" href=" https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">

</head>

<body>
    <nav>
        <div class="container">
            <div>
                <span>USD</span>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <ul>
                <li>
                    <a href="">
                        <i class="fa-solid fa-heart"></i>
                        <span>Wish List</span>
                    </a>
                </li>
                <li id="my_account">
                    <div style="cursor: pointer;" href="" id="account">
                        <i class="fa-solid fa-user"></i>
                        <span>My Account</span>
                        <i class="down fa-solid fa-chevron-down"></i>
                    </div>
                    <div id="account_sub_menu" class=" liftUp">
                        <span><a href="../sign/index.html">Sign in</a></span>
                        <span><a href="../register/index.html">Register</a></span>
                        <span><a href="../upload book/index.html">Upload a Book</a></span>
                        <span>Cart</span>
                    </div>
                </li>
                <li>
                    <a href="">
                        <i class="fa-solid fa-phone-flip"></i>
                        <span>Contact</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <i class="fa-solid fa-share"></i>
                        <span> Checkout</span></a>
                </li>
            </ul>
        </div>
    </nav>
    <header>
        <div class="container">
            <div class="frist-row">
                <div class="logo">
                    <img src="../images/logo.png" alt="">
                    <div class="contact-num">
                        <i class="fa-solid fa-headphones-simple"></i>
                        <span>
                            <span class="support">Free Support 24/74</span>
                            <br>
                            +01-202-555-0181
                        </span>
                    </div>
                </div>

                <ul>
                    <li class="sub_menu_container">
                        <div class="link" style="cursor: pointer;" href="">
                            <span>HOME</span>
                            <i class=" fa-solid fa-chevron-down"></i>
                        </div>
                        <container id="HOME" class=" sub_menu">
                            <span>Home 1</span>
                            <span>Home 2</span>
                            <span>Home 3</span>
                            <span>Home 4</span>
                        </container>
                    </li>
                    <li class="sub_menu_container">
                        <div class="link" style="cursor: pointer;" href="">
                            <span>CATALOG</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <container id="CATALOG" class="   sub_menu">
                            <div>
                                <h1>MOBILE PHONES</h1>
                                <div>
                                    <span>Home </span>
                                    <span>Catalog</span>
                                    <span>Spicials</span>
                                    <span>Pages</span>
                                    <span>Product Pages</span>
                                </div>
                            </div>
                            <div>
                                <h1>SMARTWATCHES</h1>
                                <div>
                                    <span>Home </span>
                                    <span>Catalog</span>
                                    <span>Spicials</span>
                                    <span>Pages</span>
                                    <span>Product Pages</span>
                                </div>
                            </div>
                            <div>
                                <h1>SMART TVS</h1>
                                <div>
                                    <span>Home </span>
                                    <span>Catalog</span>
                                    <span>Spicials</span>
                                    <span>Pages</span>
                                    <span>Product Pages</span>
                                </div>
                            </div>
                        </container>
                    </li>
                    <li class="sub_menu_container">
                        <div class="link" style="cursor: pointer;" href="">
                            <span>SPECIALS</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <container id="SPECIALS" class="  sub_menu">
                            <div>

                                <img src="../images/module1.webp" alt="">

                                <div>
                                    <h5>A Million Little
                                        Pieces -James Frey</h5>
                                    <div class="price">
                                        <h5 class="price">$111</h5>
                                        <p class="prev_price">$112</p>
                                    </div>
                                </div>
                            </div>
                            <div>

                                <img src="../images/product10.webp" alt="">

                                <div>
                                    <h5>A Million Little
                                        Pieces -James Frey</h5>
                                    <div class="price">
                                        <h5 class="price">$111</h5>
                                        <p class="prev_price">$112</p>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <img src="../images/playing-video.avif" alt="">

                                <div>
                                    <h5>A Million Little
                                        Pieces -James Frey</h5>
                                    <div class="price">
                                        <h5 class="price">$111</h5>
                                        <p class="prev_price">$112</p>
                                    </div>
                                </div>
                            </div>
                        </container>
                    </li>
                    <li class="sub_menu_container">
                        <div class="link" style="cursor: pointer;" href="">
                            <span>PAGES</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <container id="PAGES" class=" sub_menu">
                            <span style="">
                                <p>
                                    COLLECTION PAGES
                                    <i class="fa-solid fa-chevron-right"></i>
                                </p>
                            </span>

                            <span>BLOG</span>
                            <span>CONTACT US</span>
                            <span>FAQS</span>
                            <span>404</span>
                            <span>CART</span>
                            <span>CHECKOUT</span>
                            <span>WHISHLIST</span>
                            <span>LOGIN</span>
                            <span>REGISTER</span>
                        </container>
                    </li>
                    <li class="sub_menu_container">
                        <div class="link" style="cursor: pointer;" href="">
                            <span>PRODUCT PAGES</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                        <container id="PRODUCT_PAGES" class=" sub_menu">
                            <span>HORIZONTAL THUMBS</span>
                            <span>BERTICAL THUMBS</span>
                            <span>VERTICAL THUMBS-RIGHT</span>
                            <span>IMAGE ROLLOVER</span>
                            <span>PRE ORDER</span>
                            <span>VIDEO THUMB</span>
                            <span>DEAL COUNTER</span>
                            <span>TRUST BADGE</span>
                            <span>CUSTOM SUMMARY</span>
                        </container>
                    </li>
                </ul>
            </div>
            <div class="Second-row">
                <button class="category">
                    <i class="fa-solid fa-bars"></i>
                    <span>Browse categories</span>
                    <i class="fa-solid fa-chevron-down"></i>
                    <div class="disabled" id="categories_content">
                        <span>Arts & Photography
                            <div class="sub_sub_list">
                                <span>Biographies</span>
                                <span>Business & Money</span>
                                <span>Calendars</span>
                                <span>Children's Books</span>
                                <span>Comics</span>
                            </div>
                        </span>
                        <span>Biographies</span>
                        <span>Business & Money</span>
                        <span>Calendars</span>
                        <span>Children's Books</span>
                        <span>Comics</span>
                        <span>Perfomance Filters</span>
                        <span>Cookbooks</span>
                        <span>Accessories</span>
                        <span>Education</span>
                        <span>Indoor Living</span>
                        <span>+ More Categories</span>
                    </div>
                </button>

                <div class="search">
                    <input type="text" id="search_bar" placeholder="Search here...">
                    <button id="search_btn">Search</button>
                    <div id="found_data_container" class="disabled">
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sign-cart">
                    <div class="signRegister">
                        <a class="sign" href="../sign/index.html">sign in</a>
                        <a href="../register/index.html"><span>or</span>Register</a>
                    </div>
                    <a class="cart" href="">
                        <i class="fa-brands fa-opencart"></i>
                        <div class="shop-cart">
                            Shopping Cart <span class="num">0</span>
                            <br>
                            <span>$0.00</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </header>
    <div class="uploadNewBook">
        <div class="container">
            <div class="breadcrumb">
                <a href="../">Home</a>
                <span>></span>
                <a href="">Upload a Book</a>
            </div>
            <div class="uploadBook">
                <h2>Upload a Book</h2>
                <form id="uploadForm">
                    <label for="title">Book Title:</label>
                    <input type="text" id="title" name="title" required>

                    <label for="author">Author:</label>
                    <input type="text" id="author" name="author" required>

                    <label for="originalPrice">Original Price:</label>
                    <input type="number" id="originalPrice" name="originalPrice" required>

                    <label for="discounted-price">Discounted Price:</label>
                    <input type="number" id="discountedPrice" name="discounted-price" required>

                    <label for="description">Description:</label>
                    <textarea id="description" name="description" required></textarea>

                    <label for="brand">Brand:</label>
                    <input type="text" id="brand" name="brand" required>

                    <label for="tags">Tags (comma-separated):</label>
                    <input type="text" id="tags" name="tags" required>

                    <label for="stock">Stock:</label>
                    <input type="number" id="stock" name="stock" required>

                    <label for="coverImageUrl">Cover Image Url:</label>
                    <input type="url" id="coverImageUrl" name="coverImageUrl"
                        placeholder="Example:https://example.com/pride-and-prejudice.jpg " required>

                    <label for="additionalImages">Additional Images:</label>
                    <input type="file" id="additionalImages" name="additionalImages" accept="image/*" multiple>

                    <button type="button" onclick="uploadBook()">Upload Book</button>
                </form>
            </div>

        </div>
    </div>
    <footer>
        <div class="footer-top"></div>
        <div class="footer-inner">
            <div class="container">
                <p>Suspendisse in auctor augue. Cras fermentum est ac fermentum tempor. Etiam vel magna volutpat,
                    posuere eros</p>
                <img src="../images/payment.avif" alt="">
                <p class="copyright">Copyright Â© 2019 <span> MassTechnologist.com.</span>All rights reserved.</p>

            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="../app.js"></script>
    <script>
        let title = document.getElementById("title");
        let author = document.getElementById("author");
        let description = document.getElementById("description");
        let originalPrice = document.getElementById("originalPrice");
        let discountedPrice = document.getElementById("discountedPrice");
        let coverImageUrl = document.getElementById("coverImageUrl");
        let stock = document.getElementById("stock");
        let brand = document.getElementById("brand");
        let additionalImages = document.getElementById("additionalImages")

        async function uploadBook() {
            let today = new Date();
            let year = today.getFullYear();
            let month = String(today.getMonth() + 1).padStart(2, '0');
            let day = String(today.getDate()).padStart(2, '0');
            let formattedDate = `${year}-${month}-${day}`;

            if (title.value && author.value && description.value && originalPrice.value && discountedPrice.value && coverImageUrl.value && stock.value && brand.value) {
                if (/^https?:\/\/.+\.(jpg|jpeg|png|webp|avif|gif|svg)$/.test(coverImageUrl.value)) {
                    let dataForm = {
                        title: title.value,
                        author: author.value,
                        description: description.value,
                        originalPrice: parseFloat(originalPrice.value),
                        discountedPrice: parseFloat(discountedPrice.value),
                        coverImageUrl: coverImageUrl.value,
                        stock: parseInt(stock.value, 10),
                        publicationDate: formattedDate,
                        brand: brand.value
                    };
                    let fetchAPI = await fetch("https://e-books-production.up.railway.app/books/add",
                        {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify(dataForm)
                        }
                    )
                    let response = await fetchAPI.json()
                    alert("The book has been successfully added!");                    // console.log(response)
                    title = ""
                    author = ""
                    description = ""
                    originalPrice = ""
                    discountedPrice = ""
                    coverImageUrl = ""
                    stock = ""
                    brand = ""
                    additionalImages = ""

                } else {
                    alert("Invalid URL format for the cover image. Please use a valid image URL (jpg, png, etc.)");

                }
            } else {
                alert("Please fill all the fields");
            }
        }
    </script>

</body>

</html>