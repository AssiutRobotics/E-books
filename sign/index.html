<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sign in</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../register/style.css" />
    <link
      rel="stylesheet"
      href=" https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <nav>
      <div class="container">
        <div>
          <span>USD</span>
          <i class="fa-solid fa-chevron-down"></i>
        </div>
        <ul>
          <li>
            <a href="">
              <i class="fa-solid fa-heart"></i>
              <span>Wish List</span>
            </a>
          </li>
          <li id="my_account">
            <div style="cursor: pointer" href="" id="account">
              <i class="fa-solid fa-user"></i>
              <span>My Account</span>
              <i class="down fa-solid fa-chevron-down"></i>
            </div>
            <div id="account_sub_menu" class="liftUp">
              <span><a href="./sign/index.html">Sign in</a></span>
              <span><a href="../register/index.html">Register</a></span>
              <span><a href="./upload book/index.html">Upload a Book</a></span>
              <span><a href="../shoppingCart/index.html">Cart </a></span>
            </div>
          </li>
          <li>
            <a href="">
              <i class="fa-solid fa-phone-flip"></i>
              <span>Contact</span>
            </a>
          </li>
          <li>
            <a href="">
              <i class="fa-solid fa-share"></i>
              <span> Checkout</span></a
            >
          </li>
        </ul>
      </div>
    </nav>
    <header>
      <div class="container">
        <div class="frist-row">
          <div class="logo">
            <img src="../images/logo.png" alt="" />
            <div class="contact-num">
              <i class="fa-solid fa-headphones-simple"></i>
              <span>
                <span class="support">Free Support 24/74</span>
                <br />
                +01-202-555-0181
              </span>
            </div>
          </div>

          <ul>
            <li class="sub_menu_container">
              <div style="cursor: pointer">
                <span>HOME</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <container id="HOME" class="sub_menu">
                <span>Home 1</span>
                <span>Home 2</span>
                <span>Home 3</span>
                <span>Home 4</span>
              </container>
            </li>
            <li class="sub_menu_container">
              <div style="cursor: pointer" href="">
                <span>CATALOG</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <container id="CATALOG" class="sub_menu">
                <div>
                  <h1>MOBILE PHONES</h1>
                  <div>
                    <span>Home </span>
                    <span>Catalog</span>
                    <span>Spicials</span>
                    <span>Pages</span>
                    <span>Product Pages</span>
                  </div>
                </div>
                <div>
                  <h1>SMARTWATCHES</h1>
                  <div>
                    <span>Home </span>
                    <span>Catalog</span>
                    <span>Spicials</span>
                    <span>Pages</span>
                    <span>Product Pages</span>
                  </div>
                </div>
                <div>
                  <h1>SMART TVS</h1>
                  <div>
                    <span>Home </span>
                    <span>Catalog</span>
                    <span>Spicials</span>
                    <span>Pages</span>
                    <span>Product Pages</span>
                  </div>
                </div>
              </container>
            </li>
            <li class="sub_menu_container">
              <div style="cursor: pointer" href="">
                <span>SPECIALS</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <container id="SPECIALS" class="sub_menu">
                <div>
                  <img src="../images/module1.webp" alt="" />

                  <div>
                    <h5>A Million Little Pieces -James Frey</h5>
                    <div class="price">
                      <h5 class="price">$111</h5>
                      <p class="prev_price">$112</p>
                    </div>
                  </div>
                </div>
                <div>
                  <img src="../images/product10.webp" alt="" />

                  <div>
                    <h5>A Million Little Pieces -James Frey</h5>
                    <div class="price">
                      <h5 class="price">$111</h5>
                      <p class="prev_price">$112</p>
                    </div>
                  </div>
                </div>
                <div>
                  <img src="../images/playing-video.avif" alt="" />

                  <div>
                    <h5>A Million Little Pieces -James Frey</h5>
                    <div class="price">
                      <h5 class="price">$111</h5>
                      <p class="prev_price">$112</p>
                    </div>
                  </div>
                </div>
              </container>
            </li>
            <li class="sub_menu_container">
              <div style="cursor: pointer" href="">
                <span>PAGES</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <container id="PAGES" class="sub_menu">
                <span>
                  <p>
                    COLLECTION PAGES
                    <i class="fa-solid fa-chevron-right"></i>
                  </p>
                </span>

                <span>BLOG</span>
                <span>CONTACT US</span>
                <span>FAQS</span>
                <span>404</span>
                <span>CART</span>
                <span>CHECKOUT</span>
                <span>WHISHLIST</span>
                <span>LOGIN</span>
                <span>REGISTER</span>
              </container>
            </li>
            <li class="sub_menu_container">
              <div style="cursor: pointer" href="">
                <span>PRODUCT PAGES</span>
                <i class="fa-solid fa-chevron-down"></i>
              </div>
              <container id="PRODUCT_PAGES" class="sub_menu">
                <span>HORIZONTAL THUMBS</span>
                <span>BERTICAL THUMBS</span>
                <span>VERTICAL THUMBS-RIGHT</span>
                <span>IMAGE ROLLOVER</span>
                <span>PRE ORDER</span>
                <span>VIDEO THUMB</span>
                <span>DEAL COUNTER</span>
                <span>TRUST BADGE</span>
                <span>CUSTOM SUMMARY</span>
              </container>
            </li>
          </ul>
        </div>
        <div class="Second-row">
          <button class="category sub_menu_container">
            <i class="fa-solid fa-bars"></i>
            <span class="">Browse categories</span>
            <i class="fa-solid fa-chevron-down"></i>
            <div class="sub_menu" id="categories_content">
              <span class="sub_menu_container">
                Arts & Photography <i class="fa-solid fa-chevron-right"></i>
                <div class="sub_sub_list sub_menu">
                  <span>Biographies</span>
                  <span>Business & Money</span>
                  <span>Calendars</span>
                  <span>Children's Books</span>
                  <span>Comics</span>
                </div>
              </span>
              <span>Biographies</span>
              <span>Business & Money</span>
              <span>Calendars</span>
              <span>Children's Books</span>
              <span id="mid_element">Comics</span>
              <span>Perfomance Filters</span>
              <span>Cookbooks</span>
              <span>Accessories</span>
              <span>Education</span>
              <span>Indoor Living</span>
              <span id="height_controller">+ More Categories</span>
            </div>
          </button>

          <div class="search">
            <input type="text" id="search_bar" placeholder="Search here..." />
            <button id="search_btn">Search</button>
            <!-- <div id="found_data_container" class="disabled">
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                        <div class="search_result">
                            <img src="../images/img-buttom.webp" alt="">
                            <div class="result_info">
                                <h6 class="title">asdasdasd</h6>
                                <p class="price">asdasd</p>
                            </div>
                        </div>
                    </div> -->
          </div>
          <div class="sign-cart">
            <div class="signRegister">
              <a class="sign" href="./sign/index.html">sign in</a>
              <a href="../register/index.html"><span>or</span>Register</a>
            </div>
            <a
              class="cart"
              href="../shoppingCart/index.html"
              style="color: inherit !important"
            >
              <i class="fa-brands fa-opencart"></i>
              <div class="shop-cart">
                Shopping Cart <span class="num">0</span>
                <br />
                <span>$0.00</span>
              </div>
            </a>
          </div>
        </div>
      </div>
    </header>
    <div class="sign">
      <div class="container">
        <div class="breadcrumb">
          <a href="../">Home</a>
          <span>></span>
          <a href="">Account</a>
        </div>
        <h1>Account</h1>
        <div class="signContent">
          <div class="newCustomer">
            <h2>New Customer</h2>
            <h4>Register Account</h4>
            <p>
              By creating an account you will be able to shop faster, be up to
              date on an order's status, and keep track of the orders you have
              previously made.
            </p>
            <button>Continue</button>
          </div>
          <div class="returningCustomer">
            <h2>Returning Customer</h2>
            <h4>I am a returning customer</h4>
            <!-- <form action="https://e-books-mu.vercel.app/user/login" method="post" > -->
            <form>
              <div class="row">
                <label for="email">Email</label>
                <input type="email" name="email" placeholder="Email" />
              </div>
              <div class="row">
                <label for="password"> Password</label>
                <input type="password" name="password" placeholder="Password" />
              </div>

              <a class="reset" href="">Forgot your password?</a>

              <div class="row submit">
                <button type="submit">Sign In</button>
                <span> or</span>
                <a href="">Return to Store</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-top"></div>
      <div class="footer-inner">
        <div class="container">
          <p>
            Suspendisse in auctor augue. Cras fermentum est ac fermentum tempor.
            Etiam vel magna volutpat, posuere eros
          </p>
          <img src="../images/payment.avif" alt="" />
          <p class="copyright">
            Copyright © 2019 <span> MassTechnologist.com.</span>All rights
            reserved.
          </p>
        </div>
      </div>
    </footer>
    <script src="../app.js"></script>
    <script>
      try {
        let form = document.forms[0];
        form.addEventListener("submit", async (e) => {
          e.preventDefault();
          let formData = new FormData(form);
          console.log(formData.get("email"), formData.get("password"));
          const res = await fetch("https://e-books-mu.vercel.app/user/login", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              email: formData.get("email"),
              password: formData.get("password"),
            }),
          });
          const data = await res.json();
          console.log(data);
          if (res.ok) {
            localStorage.setItem("data", JSON.stringify(data.data));
            console.log("data in localStorage", localStorage.getItem("data"));

            let token = JSON.parse(localStorage.getItem("data")).token;
            console.log("token", token);

            alert("Login successful");
            window.location.href = "../index.html";
          } else {
            alert(data.message);
          }
        });
      } catch (e) {
        alert(e.message);
        console.log(e);
      }

      const signinBtn = document.getElementById("signinBtn");
      if (signinBtn) {
        signinBtn.addEventListener("click", function () {
          const user = {
            name: "Ahmed Ali",
            email: "ahmed@example.com",
            phone: "+201234567890",
          };

          localStorage.setItem("user", JSON.stringify(user));
          displayUserDetails();
        });
      }
      function displayUserDetails() {
        const user = JSON.parse(localStorage.getItem("user"));
        if (user) {
          document.getElementById("userDetails").innerHTML = `
                            <h3>Welcome, ${user.name}</h3>
                            <p>Email: ${user.email}</p>
                            <p>Phone: ${user.phone}</p>
                        `;
        }
      }

      displayUserDetails();

      loginForm.addEventListener("submit", function (event) {
        event.preventDefault();

        let name = document.getElementById("name").value;
        let phone = document.getElementById("phone").value;
        let address = document.getElementById("address").value;

        if (name && phone && address) {
          let userData = { name, phone, address };
          localStorage.setItem("loggedInUser", JSON.stringify(userData));

          window.location.href = "../profile/account.html";
        } else {
          alert("Please fill in all fields!");
        }
      });
    </script>
  </body>
</html>
